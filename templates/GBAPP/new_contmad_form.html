<head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
{% extends 'GBAPP/base.html' %}

{% block content %}

<div class="containter">

  <div class="row">

      <div class="col-sm" > <h1> Control de Madurez</h1>
       <ul>
        <form action="{% url 'new_contmad' %}" method="post">
              {% csrf_token %}
            <h4> Numero Control de Madures: {{ numcontmad }} </h4>
            <h4> Vi√±edo: </h4>
            <select id="select1" name="vinedo" class="form-control">
                {% for vin in vinedo %}
                    <option value="{{ vin.NumeroVin }}">{{ vin.Nombre }}</option>
                {% endfor %}
            </select>
            <h4> Cuartel: </h4>
            <select id="select2" name="cuartel" class="form-control">
            </select>
            <h4> PH: <input type="number" name="ph" class="form-control" min="0" max="10" required></h4>
            <h4> Acidez Total: <input type="number" name="aci" class="form-control" min="0" max="10" required></h4>
            <h4> Grado Baume: <input type="number" name="Gradbau" class="form-control" min="0" max="10" required></h4>
        <input type="submit" value="Guardar Control Madurez" class="btn btn-dark">
        </form>
       </ul>
      </div>
  </div>
</div>
    <script>
    $(document).ready(function() {
    $('#select1').change(function() {
        var selectedValue = $(this).val();
        $.ajax({
            url: '/get-filtered-options/',
            type: 'GET',
            data: {
                selected_value: selectedValue
            },
            success: function(response) {
                var select2 = $('#select2');
                select2.empty();
                for (var i = 0; i < response.length; i++) {
                    var option = $('<option>').text(response[i].id);
                    select2.append(option);
                }
            },
            error: function(xhr, status, error) {
                console.log('Error:', error);
            }
        });
    });
});
</script>
{% endblock %}